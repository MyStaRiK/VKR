--
-- Файл сгенерирован с помощью SQLiteStudio v3.4.4 в Ср май 21 21:19:23 2025
--
-- Использованная кодировка текста: System
--
PRAGMA foreign_keys = off;
BEGIN TRANSACTION;

-- Таблица: audit_log
CREATE TABLE IF NOT EXISTS audit_log (
  id_audit   INTEGER PRIMARY KEY AUTOINCREMENT,
  id_user    INTEGER NOT NULL REFERENCES users(id_user),
  ip_addr    TEXT    NOT NULL,
  action     TEXT    NOT NULL,                -- e.g. SIGN, LOGIN, DELETE_KEY
  meta       TEXT,                            -- JSON-строка c деталями
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
INSERT INTO audit_log (id_audit, id_user, ip_addr, action, meta, created_at) VALUES (1, 1, '::1', 'DELETE_KEY', '{"id_key":"2"}', '2025-05-11 05:39:56');
INSERT INTO audit_log (id_audit, id_user, ip_addr, action, meta, created_at) VALUES (2, 1, '::1', 'DELETE_KEY', '{"id_key":"3"}', '2025-05-11 05:40:45');
INSERT INTO audit_log (id_audit, id_user, ip_addr, action, meta, created_at) VALUES (3, 1, '::1', 'DELETE_KEY', '{"id_key":"6"}', '2025-05-11 06:10:11');
INSERT INTO audit_log (id_audit, id_user, ip_addr, action, meta, created_at) VALUES (4, 1, '::1', 'DELETE_KEY', '{"id_key":"7"}', '2025-05-11 06:25:42');
INSERT INTO audit_log (id_audit, id_user, ip_addr, action, meta, created_at) VALUES (5, 1, '::1', 'DELETE_KEY', '{"id_key":"4"}', '2025-05-11 06:41:16');
INSERT INTO audit_log (id_audit, id_user, ip_addr, action, meta, created_at) VALUES (6, 5, '::1', 'DELETE_KEY', '{"id_key":"5"}', '2025-05-11 07:34:18');
INSERT INTO audit_log (id_audit, id_user, ip_addr, action, meta, created_at) VALUES (7, 5, '::1', 'DELETE_KEY', '{"id_key":"9"}', '2025-05-11 07:38:26');
INSERT INTO audit_log (id_audit, id_user, ip_addr, action, meta, created_at) VALUES (8, 5, '::1', 'DELETE_KEY', '{"id_key":"10"}', '2025-05-11 08:45:10');
INSERT INTO audit_log (id_audit, id_user, ip_addr, action, meta, created_at) VALUES (9, 1, '::1', 'DELETE_KEY', '{"id_key":"12"}', '2025-05-11 13:42:40');
INSERT INTO audit_log (id_audit, id_user, ip_addr, action, meta, created_at) VALUES (10, 11, '::1', 'DELETE_KEY', '{"id_key":"14"}', '2025-05-17 12:10:55');

-- Таблица: departments
CREATE TABLE IF NOT EXISTS departments (
  id_dept     INTEGER PRIMARY KEY AUTOINCREMENT,
  name        TEXT    NOT NULL UNIQUE
);
INSERT INTO departments (id_dept, name) VALUES (1, 'Куратор');
INSERT INTO departments (id_dept, name) VALUES (2, 'Фин-отдел');
INSERT INTO departments (id_dept, name) VALUES (3, 'Архив');
INSERT INTO departments (id_dept, name) VALUES (4, 'Администрация');

-- Таблица: documents
CREATE TABLE IF NOT EXISTS documents (
  id_document    INTEGER PRIMARY KEY AUTOINCREMENT,
  id_user        INTEGER    NOT NULL REFERENCES users(id_user) ON DELETE CASCADE,
  original_name  TEXT       NOT NULL,
  stored_path    TEXT       NOT NULL,
  mime_type      TEXT       NOT NULL,
  size           INTEGER,
  uploaded_at    DATETIME   DEFAULT CURRENT_TIMESTAMP
);
INSERT INTO documents (id_document, id_user, original_name, stored_path, mime_type, size, uploaded_at) VALUES (1, 1, '???°???µN?N?.docx', '1746617882533-???°???µN?N?.docx', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document', 20074, '2025-05-07 11:38:02');
INSERT INTO documents (id_document, id_user, original_name, stored_path, mime_type, size, uploaded_at) VALUES (2, 1, '???°N??°??N??µN???N?N??????°_?????»N????°?µ??.docx', '1746617978345-???°N??°??N??µN???N?N??????°_?????»N????°?µ??.docx', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document', 19212, '2025-05-07 11:39:38');
INSERT INTO documents (id_document, id_user, original_name, stored_path, mime_type, size, uploaded_at) VALUES (3, 1, 'Prezentatsia.pptx', '1746619128404-Prezentatsia.pptx', 'application/vnd.openxmlformats-officedocument.presentationml.presentation', 1958248, '2025-05-07 11:58:48');
INSERT INTO documents (id_document, id_user, original_name, stored_path, mime_type, size, uploaded_at) VALUES (4, 1, 'Animation - 1745906211261.lottie', '1746619310534-Animation - 1745906211261.lottie', 'application/octet-stream', 96611, '2025-05-07 12:01:50');
INSERT INTO documents (id_document, id_user, original_name, stored_path, mime_type, size, uploaded_at) VALUES (5, 1, 'Digital_Signatures_Presentation_Smoother.docx', '1746621034875-Digital_Signatures_Presentation_Smoother.docx', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document', 40076, '2025-05-07 12:30:34');
INSERT INTO documents (id_document, id_user, original_name, stored_path, mime_type, size, uploaded_at) VALUES (6, 1, 'задание 2.docx', '1746621058793-задание 2.docx', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document', 16752, '2025-05-07 12:30:58');
INSERT INTO documents (id_document, id_user, original_name, stored_path, mime_type, size, uploaded_at) VALUES (7, 1, 'Prezentatsia (1).pptx', '1746621317812-Prezentatsia (1).pptx', 'application/vnd.openxmlformats-officedocument.presentationml.presentation', 1958248, '2025-05-07 12:35:17');
INSERT INTO documents (id_document, id_user, original_name, stored_path, mime_type, size, uploaded_at) VALUES (8, 1, 'Задание 1 (по примеру).xlsx', '1746621788105-Задание 1 (по примеру).xlsx', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', 67282, '2025-05-07 12:43:08');
INSERT INTO documents (id_document, id_user, original_name, stored_path, mime_type, size, uploaded_at) VALUES (9, 1, '1.pdf', '1746622747753-1.pdf', 'application/pdf', 953562, '2025-05-07 12:59:07');
INSERT INTO documents (id_document, id_user, original_name, stored_path, mime_type, size, uploaded_at) VALUES (10, 1, 'Лабораторная №1.doc', '1746624683204-Лабораторная №1.doc', 'application/msword', 311296, '2025-05-07 13:31:23');
INSERT INTO documents (id_document, id_user, original_name, stored_path, mime_type, size, uploaded_at) VALUES (11, 1, '1.pdf', '1746624943017-1.pdf', 'application/pdf', 953562, '2025-05-07 13:35:43');
INSERT INTO documents (id_document, id_user, original_name, stored_path, mime_type, size, uploaded_at) VALUES (12, 1, 'Задание 1 (по примеру).xlsx', '1746625147067-Задание 1 (по примеру).xlsx', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', 67282, '2025-05-07 13:39:07');
INSERT INTO documents (id_document, id_user, original_name, stored_path, mime_type, size, uploaded_at) VALUES (13, 1, 'Animation - 1745906211261 (1).lottie', '1746625248154-Animation - 1745906211261 (1).lottie', 'application/octet-stream', 96611, '2025-05-07 13:40:48');
INSERT INTO documents (id_document, id_user, original_name, stored_path, mime_type, size, uploaded_at) VALUES (14, 1, '2.2 Отчет, дневник и хакрактеристика, практика в структурном подразделении ИРНИТУ.docx', '1746625330922-2.2 Отчет, дневник и хакрактеристика, практика в структурном подразделении ИРНИТУ.docx', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document', 27404, '2025-05-07 13:42:10');
INSERT INTO documents (id_document, id_user, original_name, stored_path, mime_type, size, uploaded_at) VALUES (15, 1, '2.2 Отчет, дневник и хакрактеристика, практика в структурном подразделении ИРНИТУ.docx', '1746687143059-2.2 Отчет, дневник и хакрактеристика, практика в структурном подразделении ИРНИТУ.docx', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document', 27404, '2025-05-08 06:52:23');
INSERT INTO documents (id_document, id_user, original_name, stored_path, mime_type, size, uploaded_at) VALUES (16, 1, 'Задание 1 (по примеру).xlsx', '1746712144630-Задание 1 (по примеру).xlsx', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', 67282, '2025-05-08 13:49:04');
INSERT INTO documents (id_document, id_user, original_name, stored_path, mime_type, size, uploaded_at) VALUES (17, 1, 'Задание 1 (по примеру) (2).xlsx', '1746944051585-Задание 1 (по примеру) (2).xlsx', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', 67282, '2025-05-11 06:14:11');
INSERT INTO documents (id_document, id_user, original_name, stored_path, mime_type, size, uploaded_at) VALUES (18, 1, 'Задание 1 (по примеру) (2).xlsx', '1746944056720-Задание 1 (по примеру) (2).xlsx', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', 67282, '2025-05-11 06:14:16');
INSERT INTO documents (id_document, id_user, original_name, stored_path, mime_type, size, uploaded_at) VALUES (19, 1, 'Задание 1 (по примеру) (2).xlsx', '1746944071159-Задание 1 (по примеру) (2).xlsx', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', 67282, '2025-05-11 06:14:31');
INSERT INTO documents (id_document, id_user, original_name, stored_path, mime_type, size, uploaded_at) VALUES (20, 1, 'Задание 1 (по примеру) (1).xlsx', '1746945172513-Задание 1 (по примеру) (1).xlsx', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', 67282, '2025-05-11 06:32:52');
INSERT INTO documents (id_document, id_user, original_name, stored_path, mime_type, size, uploaded_at) VALUES (21, 1, 'Задание 1 (по примеру) (1).xlsx', '1746945250358-Задание 1 (по примеру) (1).xlsx', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', 67282, '2025-05-11 06:34:10');
INSERT INTO documents (id_document, id_user, original_name, stored_path, mime_type, size, uploaded_at) VALUES (22, 1, 'Задание 1 (по примеру) (2).xlsx', '1746945446067-Задание 1 (по примеру) (2).xlsx', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', 67282, '2025-05-11 06:37:26');
INSERT INTO documents (id_document, id_user, original_name, stored_path, mime_type, size, uploaded_at) VALUES (23, 1, 'Задание 1 (по примеру) (2).xlsx', '1746945454493-Задание 1 (по примеру) (2).xlsx', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', 67282, '2025-05-11 06:37:34');
INSERT INTO documents (id_document, id_user, original_name, stored_path, mime_type, size, uploaded_at) VALUES (24, 1, 'Задание 1 (по примеру) (2).xlsx', '1746945466120-Задание 1 (по примеру) (2).xlsx', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', 67282, '2025-05-11 06:37:46');
INSERT INTO documents (id_document, id_user, original_name, stored_path, mime_type, size, uploaded_at) VALUES (25, 1, 'Задание 1 (по примеру) (1).xlsx', '1746945539564-Задание 1 (по примеру) (1).xlsx', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', 67282, '2025-05-11 06:38:59');
INSERT INTO documents (id_document, id_user, original_name, stored_path, mime_type, size, uploaded_at) VALUES (26, 1, 'Задание 1 (по примеру) (1).xlsx', '1746945546589-Задание 1 (по примеру) (1).xlsx', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', 67282, '2025-05-11 06:39:06');
INSERT INTO documents (id_document, id_user, original_name, stored_path, mime_type, size, uploaded_at) VALUES (27, 1, 'Задание 1 (по примеру) (2).xlsx', '1746946235916-Задание 1 (по примеру) (2).xlsx', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', 67282, '2025-05-11 06:50:35');
INSERT INTO documents (id_document, id_user, original_name, stored_path, mime_type, size, uploaded_at) VALUES (28, 1, 'Задание 1 (по примеру) (2).xlsx', '1746946244668-Задание 1 (по примеру) (2).xlsx', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', 67282, '2025-05-11 06:50:44');
INSERT INTO documents (id_document, id_user, original_name, stored_path, mime_type, size, uploaded_at) VALUES (29, 1, 'Задание 1 (по примеру) (2).xlsx', '1746946443383-Задание 1 (по примеру) (2).xlsx', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', 67282, '2025-05-11 06:54:03');
INSERT INTO documents (id_document, id_user, original_name, stored_path, mime_type, size, uploaded_at) VALUES (30, 1, '2.2 Отчет, дневник и хакрактеристика, практика в структурном подразделении ИРНИТУ (1).docx', '1746946589634-2.2 Отчет, дневник и хакрактеристика, практика в структурном подразделении ИРНИТУ (1).docx', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document', 27404, '2025-05-11 06:56:29');
INSERT INTO documents (id_document, id_user, original_name, stored_path, mime_type, size, uploaded_at) VALUES (31, 1, 'Prezentatsia (1) (1).pptx', '1746946601463-Prezentatsia (1) (1).pptx', 'application/vnd.openxmlformats-officedocument.presentationml.presentation', 1958248, '2025-05-11 06:56:41');
INSERT INTO documents (id_document, id_user, original_name, stored_path, mime_type, size, uploaded_at) VALUES (32, 1, '2.2 Отчет, дневник и хакрактеристика, практика в структурном подразделении ИРНИТУ.docx', '1746947549573-2.2 Отчет, дневник и хакрактеристика, практика в структурном подразделении ИРНИТУ.docx', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document', 27404, '2025-05-11 07:12:29');
INSERT INTO documents (id_document, id_user, original_name, stored_path, mime_type, size, uploaded_at) VALUES (33, 1, 'Задание 1 (по примеру).xlsx', '1746947565342-Задание 1 (по примеру).xlsx', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', 67282, '2025-05-11 07:12:45');
INSERT INTO documents (id_document, id_user, original_name, stored_path, mime_type, size, uploaded_at) VALUES (34, 1, 'Prezentatsia (1) (1).pptx', '1746947576889-Prezentatsia (1) (1).pptx', 'application/vnd.openxmlformats-officedocument.presentationml.presentation', 1958248, '2025-05-11 07:12:56');
INSERT INTO documents (id_document, id_user, original_name, stored_path, mime_type, size, uploaded_at) VALUES (35, 1, 'Задание 1 (по примеру) (1).xlsx', '1746948290365-Задание 1 (по примеру) (1).xlsx', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', 67282, '2025-05-11 07:24:50');
INSERT INTO documents (id_document, id_user, original_name, stored_path, mime_type, size, uploaded_at) VALUES (36, 1, 'Задание 1 (по примеру) (1).xlsx', '1746948293632-Задание 1 (по примеру) (1).xlsx', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', 67282, '2025-05-11 07:24:53');
INSERT INTO documents (id_document, id_user, original_name, stored_path, mime_type, size, uploaded_at) VALUES (37, 1, '2.2 Отчет, дневник и хакрактеристика, практика в структурном подразделении ИРНИТУ (2).docx', '1746948388721-2.2 Отчет, дневник и хакрактеристика, практика в структурном подразделении ИРНИТУ (2).docx', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document', 27404, '2025-05-11 07:26:28');
INSERT INTO documents (id_document, id_user, original_name, stored_path, mime_type, size, uploaded_at) VALUES (38, 1, 'Задание 1 (по примеру).xlsx', '1746948401856-Задание 1 (по примеру).xlsx', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', 67282, '2025-05-11 07:26:41');
INSERT INTO documents (id_document, id_user, original_name, stored_path, mime_type, size, uploaded_at) VALUES (39, 1, 'Prezentatsia (1) (1).pptx', '1746948792490-Prezentatsia (1) (1).pptx', 'application/vnd.openxmlformats-officedocument.presentationml.presentation', 1958248, '2025-05-11 07:33:12');
INSERT INTO documents (id_document, id_user, original_name, stored_path, mime_type, size, uploaded_at) VALUES (40, 1, '2.2 Отчет, дневник и хакрактеристика, практика в структурном подразделении ИРНИТУ (2).docx', '1746948830369-2.2 Отчет, дневник и хакрактеристика, практика в структурном подразделении ИРНИТУ (2).docx', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document', 27404, '2025-05-11 07:33:50');
INSERT INTO documents (id_document, id_user, original_name, stored_path, mime_type, size, uploaded_at) VALUES (41, 1, 'Задание 1 (по примеру) (1).xlsx', '1746948844591-Задание 1 (по примеру) (1).xlsx', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', 67282, '2025-05-11 07:34:04');
INSERT INTO documents (id_document, id_user, original_name, stored_path, mime_type, size, uploaded_at) VALUES (42, 1, '1.sav', '1746949972472-1.sav', 'application/octet-stream', 6146839, '2025-05-11 07:52:52');
INSERT INTO documents (id_document, id_user, original_name, stored_path, mime_type, size, uploaded_at) VALUES (43, 1, 'Задание 1 (по примеру) (2).xlsx', '1746950247360-Задание 1 (по примеру) (2).xlsx', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', 67282, '2025-05-11 07:57:27');
INSERT INTO documents (id_document, id_user, original_name, stored_path, mime_type, size, uploaded_at) VALUES (44, 1, 'Lida_MORGENSHTERN_-_Cvety_75137486.mp3', '1746950334733-Lida_MORGENSHTERN_-_Cvety_75137486.mp3', 'audio/mpeg', 7152788, '2025-05-11 07:58:54');
INSERT INTO documents (id_document, id_user, original_name, stored_path, mime_type, size, uploaded_at) VALUES (45, 1, 'Задание 1 (по примеру) (2).xlsx', '1746950436542-Задание 1 (по примеру) (2).xlsx', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', 67282, '2025-05-11 08:00:36');
INSERT INTO documents (id_document, id_user, original_name, stored_path, mime_type, size, uploaded_at) VALUES (46, 1, 'Animation - 1745906211261.lottie', '1746950452752-Animation - 1745906211261.lottie', 'application/octet-stream', 96611, '2025-05-11 08:00:52');
INSERT INTO documents (id_document, id_user, original_name, stored_path, mime_type, size, uploaded_at) VALUES (47, 1, 'Site_Comparison_Table.xlsx', '1746953063335-Site_Comparison_Table.xlsx', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', 7208, '2025-05-11 08:44:23');
INSERT INTO documents (id_document, id_user, original_name, stored_path, mime_type, size, uploaded_at) VALUES (48, 1, 'Site_Comparison_Table.xlsx', '1746953067650-Site_Comparison_Table.xlsx', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', 7208, '2025-05-11 08:44:27');
INSERT INTO documents (id_document, id_user, original_name, stored_path, mime_type, size, uploaded_at) VALUES (49, 1, 'Prezentatsia (1).pptx', '1746970723860-Prezentatsia (1).pptx', 'application/vnd.openxmlformats-officedocument.presentationml.presentation', 1958248, '2025-05-11 13:38:44');
INSERT INTO documents (id_document, id_user, original_name, stored_path, mime_type, size, uploaded_at) VALUES (50, 9, 'Site_Comparison_Table (1).xlsx', '1747137666498-Site_Comparison_Table (1).xlsx', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', 7208, '2025-05-13 12:01:06');
INSERT INTO documents (id_document, id_user, original_name, stored_path, mime_type, size, uploaded_at) VALUES (51, 9, 'Задание 1 (по примеру) (2).xlsx', '1747137758629-Задание 1 (по примеру) (2).xlsx', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', 67282, '2025-05-13 12:02:38');
INSERT INTO documents (id_document, id_user, original_name, stored_path, mime_type, size, uploaded_at) VALUES (52, 9, 'Prezentatsia (1).pptx', '1747137770827-Prezentatsia (1).pptx', 'application/vnd.openxmlformats-officedocument.presentationml.presentation', 1958248, '2025-05-13 12:02:50');
INSERT INTO documents (id_document, id_user, original_name, stored_path, mime_type, size, uploaded_at) VALUES (53, 9, '2.2 Отчет, дневник и хакрактеристика, практика в структурном подразделении ИРНИТУ (1).docx', '1747137806035-2.2 Отчет, дневник и хакрактеристика, практика в структурном подразделении ИРНИТУ (1).docx', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document', 27404, '2025-05-13 12:03:26');
INSERT INTO documents (id_document, id_user, original_name, stored_path, mime_type, size, uploaded_at) VALUES (54, 9, 'Site_Comparison_Table (1).xlsx', '1747137963812-Site_Comparison_Table (1).xlsx', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', 7208, '2025-05-13 12:06:03');
INSERT INTO documents (id_document, id_user, original_name, stored_path, mime_type, size, uploaded_at) VALUES (55, 11, 'Prezentatsia (1) (2).pptx', '1747482582097-Prezentatsia (1) (2).pptx', 'application/vnd.openxmlformats-officedocument.presentationml.presentation', 1958248, '2025-05-17 11:49:42');
INSERT INTO documents (id_document, id_user, original_name, stored_path, mime_type, size, uploaded_at) VALUES (56, 11, 'Site_Comparison_Table (1).xlsx', '1747483666311-Site_Comparison_Table (1).xlsx', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', 7208, '2025-05-17 12:07:46');
INSERT INTO documents (id_document, id_user, original_name, stored_path, mime_type, size, uploaded_at) VALUES (57, 1, 'Инструкция-2025 г зам ДЦС.odt', '1747645137469-Инструкция-2025 г зам ДЦС.odt', 'application/vnd.oasis.opendocument.text', 60616, '2025-05-19 08:58:57');
INSERT INTO documents (id_document, id_user, original_name, stored_path, mime_type, size, uploaded_at) VALUES (58, 1, 'Диплом правая версия.pdf', '1747825398070-Диплом правая версия.pdf', 'application/pdf', 481855, '2025-05-21 11:03:18');

-- Таблица: groups
CREATE TABLE IF NOT EXISTS groups (
  id_group INTEGER PRIMARY KEY,
  name     TEXT    NOT NULL UNIQUE
);
INSERT INTO groups (id_group, name) VALUES (1, 'АСУб-21-1');
INSERT INTO groups (id_group, name) VALUES (2, 'АСУб-21-2');
INSERT INTO groups (id_group, name) VALUES (3, 'ЭВМ-21-1');
INSERT INTO groups (id_group, name) VALUES (4, 'ЭВМ-21-2');

-- Таблица: request_comments
CREATE TABLE IF NOT EXISTS request_comments (
  id_comment      INTEGER PRIMARY KEY AUTOINCREMENT,
  id_request      INTEGER NOT NULL REFERENCES signature_requests(id_request) ON DELETE CASCADE,
  id_user         INTEGER NOT NULL REFERENCES users(id_user),
  comment         TEXT    NOT NULL,
  created_at      DATETIME DEFAULT CURRENT_TIMESTAMP
);

-- Таблица: request_signatures
CREATE TABLE IF NOT EXISTS request_signatures (
  id_signrec INTEGER PRIMARY KEY AUTOINCREMENT,
  id_request INTEGER NOT NULL REFERENCES signature_requests(id_request) ON DELETE CASCADE,
  id_key     INTEGER NOT NULL REFERENCES user_keys(id_key) ON DELETE CASCADE,
  hash_alg   TEXT    NOT NULL,              -- «sha256»
  digest     BLOB    NOT NULL,              -- 32 байта
  signature  BLOB    NOT NULL,              -- raw RSA-PKCS#1v1.5
  ts         DATETIME DEFAULT CURRENT_TIMESTAMP
, id_tsa_token INTEGER);
INSERT INTO request_signatures (id_signrec, id_request, id_key, hash_alg, digest, signature, ts, id_tsa_token) VALUES (4, 28, 8, 'sha256', X'6574F3CDF8EA40CA2C3A2FD6883DBD7ABB004D047F6481DECDC2EAE42EA6899F', X'81067AD53261899F925DC54184766E4AC21704E9C10F42087BB2227E9778544B96F49E2494AA432AC25FF246694E69B8AC9B843139262F805A2DA1F341FCB4EA5FE8536B35A6899AACB4B61FF7F64D8EC01610BE7CADFFB70B9726BD5F63609841D54599DAE8E22C360134D2AB2B9C2D0683010D33E73B7EF2E8ECAE02D043CFA3BE7EB17D03463FBA1A552E7BACFAD8EC4211EF4EBB71E4254F63C69384D7FA0846F2143CFDCD9A2782F95E8FE44F1E270B4421FF1C10371C8C28A49ECE4F467BC131145921E2917CA40AE4D02C9C4893978F3D6210D9A07C24F4EDC2CCCE28DA312D199D22A8348757447E97F9D2ACF3F0974F2E8B15E835264E4C71DB64B0', '2025-05-11 06:54:03', NULL);
INSERT INTO request_signatures (id_signrec, id_request, id_key, hash_alg, digest, signature, ts, id_tsa_token) VALUES (5, 29, 8, 'sha256', X'B015696BE540AAF4D7D91ED77482CD686798B5812E143A5C068162367FD91B34', X'147535C8F99219264B42A8C159D1BF389440E12A2E2BD864278F4A264D2D14F52A4428599195F9CFFA1B70D09DB3D243CAFD1F7EB0F93BDE74A13620AB894279B2AB47ADFF75553B96CB56690718B557C5DAA3B535FD9C36F85EFF5DC42144C86B1C73435625B93EB824295F0F5F972C7752D166C0735DA0EFA834EE66C4C22D4355792A41DD207B63FF4FD1C1170AD8F73AA8101011547C2E6E492FF807D455C8502409A9E8DA6CBF22665A0C093536E193DEAFF86EF2E5EDF75C9E2CFD33904B169AEB9BCD64BAD6F62A35B2B2265EB5BC93203B5B849537E7CF532EE247FAB146613FA90EF0C275A2FEE8F4A1C9B646E331D83D9440173EC1752884B4A47D', '2025-05-11 06:56:29', NULL);
INSERT INTO request_signatures (id_signrec, id_request, id_key, hash_alg, digest, signature, ts, id_tsa_token) VALUES (6, 30, 8, 'sha256', X'9E8E57FCB68AB09D25F79751C06D861DCC07A120901CF549E7568E4C10EA2233', X'957D607A4D9F3AC28E8CB497D24E3AF515D1ED4817431A69FFB3E49AE4A3F650BD97C216FC3EC05A9B87EC70346EA6686D8E802FCABABC0CC21B6E03CE31BCE4A9A16736BA8442A681F7201C19D84DC4B0F7755D008A131668C70837C4F172F39262AFF1D78D4E029C17297253F0C0E1B627A2CB04DAD84A767944492914359F8D05220EC0FCEE4BA55189E6F949C9325CEE3133EDE04E3A1720B0085EC9D7178D5E9B6DC96165F8661382C5190DC051830C50DBFAFEF50B3024A092827F17019DE599578D723A9E27907ECE1270C873B7D8EB82AFEA70426ECDE535CE97C446023F8C291C5724498CEBCDF12BDE3090DCE3628CE322F300AE5409E7F330C19B', '2025-05-11 06:56:41', NULL);
INSERT INTO request_signatures (id_signrec, id_request, id_key, hash_alg, digest, signature, ts, id_tsa_token) VALUES (7, 31, 8, 'sha256', X'B015696BE540AAF4D7D91ED77482CD686798B5812E143A5C068162367FD91B34', X'147535C8F99219264B42A8C159D1BF389440E12A2E2BD864278F4A264D2D14F52A4428599195F9CFFA1B70D09DB3D243CAFD1F7EB0F93BDE74A13620AB894279B2AB47ADFF75553B96CB56690718B557C5DAA3B535FD9C36F85EFF5DC42144C86B1C73435625B93EB824295F0F5F972C7752D166C0735DA0EFA834EE66C4C22D4355792A41DD207B63FF4FD1C1170AD8F73AA8101011547C2E6E492FF807D455C8502409A9E8DA6CBF22665A0C093536E193DEAFF86EF2E5EDF75C9E2CFD33904B169AEB9BCD64BAD6F62A35B2B2265EB5BC93203B5B849537E7CF532EE247FAB146613FA90EF0C275A2FEE8F4A1C9B646E331D83D9440173EC1752884B4A47D', '2025-05-11 07:12:29', NULL);
INSERT INTO request_signatures (id_signrec, id_request, id_key, hash_alg, digest, signature, ts, id_tsa_token) VALUES (8, 32, 8, 'sha256', X'6574F3CDF8EA40CA2C3A2FD6883DBD7ABB004D047F6481DECDC2EAE42EA6899F', X'81067AD53261899F925DC54184766E4AC21704E9C10F42087BB2227E9778544B96F49E2494AA432AC25FF246694E69B8AC9B843139262F805A2DA1F341FCB4EA5FE8536B35A6899AACB4B61FF7F64D8EC01610BE7CADFFB70B9726BD5F63609841D54599DAE8E22C360134D2AB2B9C2D0683010D33E73B7EF2E8ECAE02D043CFA3BE7EB17D03463FBA1A552E7BACFAD8EC4211EF4EBB71E4254F63C69384D7FA0846F2143CFDCD9A2782F95E8FE44F1E270B4421FF1C10371C8C28A49ECE4F467BC131145921E2917CA40AE4D02C9C4893978F3D6210D9A07C24F4EDC2CCCE28DA312D199D22A8348757447E97F9D2ACF3F0974F2E8B15E835264E4C71DB64B0', '2025-05-11 07:12:45', NULL);
INSERT INTO request_signatures (id_signrec, id_request, id_key, hash_alg, digest, signature, ts, id_tsa_token) VALUES (9, 33, 8, 'sha256', X'9E8E57FCB68AB09D25F79751C06D861DCC07A120901CF549E7568E4C10EA2233', X'957D607A4D9F3AC28E8CB497D24E3AF515D1ED4817431A69FFB3E49AE4A3F650BD97C216FC3EC05A9B87EC70346EA6686D8E802FCABABC0CC21B6E03CE31BCE4A9A16736BA8442A681F7201C19D84DC4B0F7755D008A131668C70837C4F172F39262AFF1D78D4E029C17297253F0C0E1B627A2CB04DAD84A767944492914359F8D05220EC0FCEE4BA55189E6F949C9325CEE3133EDE04E3A1720B0085EC9D7178D5E9B6DC96165F8661382C5190DC051830C50DBFAFEF50B3024A092827F17019DE599578D723A9E27907ECE1270C873B7D8EB82AFEA70426ECDE535CE97C446023F8C291C5724498CEBCDF12BDE3090DCE3628CE322F300AE5409E7F330C19B', '2025-05-11 07:12:57', NULL);
INSERT INTO request_signatures (id_signrec, id_request, id_key, hash_alg, digest, signature, ts, id_tsa_token) VALUES (10, 35, 8, 'sha256', X'6574F3CDF8EA40CA2C3A2FD6883DBD7ABB004D047F6481DECDC2EAE42EA6899F', X'81067AD53261899F925DC54184766E4AC21704E9C10F42087BB2227E9778544B96F49E2494AA432AC25FF246694E69B8AC9B843139262F805A2DA1F341FCB4EA5FE8536B35A6899AACB4B61FF7F64D8EC01610BE7CADFFB70B9726BD5F63609841D54599DAE8E22C360134D2AB2B9C2D0683010D33E73B7EF2E8ECAE02D043CFA3BE7EB17D03463FBA1A552E7BACFAD8EC4211EF4EBB71E4254F63C69384D7FA0846F2143CFDCD9A2782F95E8FE44F1E270B4421FF1C10371C8C28A49ECE4F467BC131145921E2917CA40AE4D02C9C4893978F3D6210D9A07C24F4EDC2CCCE28DA312D199D22A8348757447E97F9D2ACF3F0974F2E8B15E835264E4C71DB64B0', '2025-05-11 07:24:53', NULL);
INSERT INTO request_signatures (id_signrec, id_request, id_key, hash_alg, digest, signature, ts, id_tsa_token) VALUES (27, 46, 13, 'sha256', X'6574F3CDF8EA40CA2C3A2FD6883DBD7ABB004D047F6481DECDC2EAE42EA6899F', X'560A015F1C580F02F1052BB0A6FE3AC79B26C40AB44E5BB329E93DF6B9A6E7D4303E7C2B3C58FEBF2AF76D6F7048F7FBB8E0868DE7D7DBA2097AEEF81792921A1EADC70D9DF8C5DB6CF5F1F125893DC6B65110947DDCEA20040667B0C1F6FB8024B8FF82C39345383FD44CBA87EA72C37F05E148EB35CD14C8E91ECB9580A22DE5E0E542BF3D67D3723F19C3FE9CA466211FA0AF922528DAC6264748D000A646F89BF55CBC2C10B9C257847E2EE97667A23E5FB40252E18510CF8596DF879D0ECBCBBAD467CD88892B74E59E6594B58F660AF11D423E6612FCCDFF007625FC1496B11AEC8AF29DE6D89B00744F4A69256C4ED9E0568C1A068CD0ADAC8F523945', '2025-05-13 12:02:38', NULL);
INSERT INTO request_signatures (id_signrec, id_request, id_key, hash_alg, digest, signature, ts, id_tsa_token) VALUES (29, 47, 11, 'sha256', X'9E8E57FCB68AB09D25F79751C06D861DCC07A120901CF549E7568E4C10EA2233', X'735861E86A80484EB4FA5C42597C1B9B7D483F36C7A7E6B191665E0B215ECD0BAB80F60D0067218AA41EC12D2791F97969DD511E36242F5CEB44F58745F3C9874BD813B6A72FAA610C7ADFA5C39D14A31C5DA7034AE4DB34A88C274CEE05B7ABF2C6853F13E0D17C25EB759C374B2F6B48125F7DE66B6ED730BEFACB584F2C4095839DF012B760FC8EEAB28AC8E46FEE632C6E385D00E4769383EBE6D0B4C0BACBDD907DD19EA33532BDD2D5602D21486C943A7FC5CC3D8C2CC59B95D36DD44BD1B9D1C6AA81BB5ABCEF333F56727819CF1EA5C9B48408A40A9901938578CEE5B75E95722A774FBF625515513F7B7AA746DE92EC36B01E58DE27C8FE140413D9', '2025-05-17 12:04:53', NULL);
INSERT INTO request_signatures (id_signrec, id_request, id_key, hash_alg, digest, signature, ts, id_tsa_token) VALUES (31, 49, 8, 'sha256', X'ED429B6B86D3348EE03EB81AE03C81B66C8796B491D37237EF85A3FA182AB069', X'5CEE0EB4EA8969376E7C0DD32E76E0D5EC6D17368001F0FF754C665516A003993630F373C284927E80C7D09516EDB53E924E5D5BD12CD0D95649A0D2BDF70A0F1354F7ABB1A392BBFE05F0CA4449ECDEE9682F4DF516FA469E8CF0F12FF9A532C2DB9D46FD0EBEDEEA946F60DAE0DABC7FAB0718FBFFF7FEDBAFBA2080FA8A0B40A96C0D9B7166AC39E325B4AE22CC7DF268F95B093C47712ADE17043BBF8A9187D6615C90F0D3F90E53AAD7764B24CEFB5E6F7641FE5AFA27B44E62FFC59E2616AC52791C927AD553DE34909239DD116563B5143B7DD1077271BDE9C683CA5FAE7DA6E1B0E05D5C6D1ACFAA97209543D4E03F3A2D0D0271D9DDF3330FC623E5', '2025-05-19 08:58:57', NULL);
INSERT INTO request_signatures (id_signrec, id_request, id_key, hash_alg, digest, signature, ts, id_tsa_token) VALUES (32, 49, 11, 'sha256', X'ED429B6B86D3348EE03EB81AE03C81B66C8796B491D37237EF85A3FA182AB069', X'C0F536B8CF124A758488A766900EF970D5FBBEEC7858AD090917F40A157A3B6062FF7DD682C71B654C7B977B54ACCF984C1CF98836C5AA638B473F646EF8F2797C66BD5D81176A39FC37C9EA0A18E4900D17FDE9646E098484350F5F7B546F1BC0D00EB1877A09C7DB4969D0EE18F0A2240DD9491EEE0E4A858DB6AA68B1303C5CC81130B6F36F79E0445E7B4BFD5BA256E3E822162276F4EFF3A7CF7E84B35675009A47FAF9E1ED4200EBB17E8D4BAB80E77A820DC6B37E40FB3C7BDA35FB9251C9A86327EBB790B0F523D5ED5435B0215B2051E34640F94161433F0A0B46AE63AD30B06A86FCB17D2F9B6465C6D01158A8DCAB593C2D37A51F6E2327BF2A5F', '2025-05-19 08:59:42', NULL);
INSERT INTO request_signatures (id_signrec, id_request, id_key, hash_alg, digest, signature, ts, id_tsa_token) VALUES (33, 50, 8, 'sha256', X'F63C4B14B8467DDA5CBA3D28B025D9704640EE99D4BA7BF50D38A39088A1263C', X'7AA8531953DB4D362D47F68A843485B345AE2A24204043FA517B119ED14B2D3933DCF986D3684406818D3AEFBAD585A4C0776763F5A0A4AF5A4303AC17FAB0D38570C0324C4DA686550B61B17281ADC577A3CBC24253AFD274A6CDDCBFE00F1C0D776F73608DE8A21B3017D8E2C06705639051A2C4317CFF4BEFC4381B1BC8070121E503191993033801F6487F474CFC5DF41205E12D23ABFF7915243F0748803111A92472F5E57FC0FC036B93D77A8665E4751A07C111A496BA7A456E3BC5075ED74A5CE3E9DB9C01344ECCB1BCA565B8084B58172B9A3E5DA472CFC96130EE9137FBEAC536F917F4D16A346B8F4105751C770C782AC9C8E088426FF4DC6887', '2025-05-21 11:03:18', NULL);
INSERT INTO request_signatures (id_signrec, id_request, id_key, hash_alg, digest, signature, ts, id_tsa_token) VALUES (34, 50, 11, 'sha256', X'F63C4B14B8467DDA5CBA3D28B025D9704640EE99D4BA7BF50D38A39088A1263C', X'0F53DAA2C380B1A89C1266E8E83B5459B51C8EB0961455EF14A173845C9B479C71ACF8BFE7D6B314FC38555B2F4A46E07B6296FF5184863906AE25248F8AEBA3B5B6283590C3CEF42713A116DEA99287ABF25E71D77A0168A8706748DBAFD455BBE9A7B9C8E203E0E3A604637C2CDBDC04807EBAF0FB9F2CC4A33271DBA4CBCF0F88D8D9EE89876DC59601E51CA1C02FFAA0DE2CA73163FB0B86290F71E9D39E211D913416217881E5921E84B1B1DB2557C4A4AF175F259429BDE018CBE8C9D85350E336448F9485E09E39B58C865ADF3E04785AB789CB71BF27C27A62A16D9CB1806EF629517E9EEECABE1B6775D9E6215250306E3EA6E03131F687C9BB64A8', '2025-05-21 11:04:13', NULL);

-- Таблица: roles
CREATE TABLE IF NOT EXISTS roles (
  id_role INTEGER PRIMARY KEY,
  name    TEXT    NOT NULL UNIQUE
);
INSERT INTO roles (id_role, name) VALUES (1, 'Преподаватель');
INSERT INTO roles (id_role, name) VALUES (2, 'Администратор');
INSERT INTO roles (id_role, name) VALUES (3, 'Студент');

-- Таблица: signature_requests
CREATE TABLE IF NOT EXISTS signature_requests (
  id_request          INTEGER PRIMARY KEY AUTOINCREMENT,
  id_document         INTEGER NOT NULL REFERENCES documents(id_document) ON DELETE CASCADE,
  id_sender           INTEGER NOT NULL REFERENCES users(id_user),
  id_recipient_user   INTEGER REFERENCES users(id_user),
  id_recipient_dept   INTEGER REFERENCES departments(id_dept),
  id_status           INTEGER NOT NULL REFERENCES statuses(id_status),
  comment_sender      TEXT,
  created_at          DATETIME DEFAULT CURRENT_TIMESTAMP,
  updated_at          DATETIME DEFAULT CURRENT_TIMESTAMP
);
INSERT INTO signature_requests (id_request, id_document, id_sender, id_recipient_user, id_recipient_dept, id_status, comment_sender, created_at, updated_at) VALUES (46, 54, 9, 1, NULL, 3, NULL, '2025-05-13 12:02:38', '2025-05-13 12:03:50');
INSERT INTO signature_requests (id_request, id_document, id_sender, id_recipient_user, id_recipient_dept, id_status, comment_sender, created_at, updated_at) VALUES (47, 55, 11, 5, NULL, 2, NULL, '2025-05-17 11:49:42', '2025-05-17 12:04:53');
INSERT INTO signature_requests (id_request, id_document, id_sender, id_recipient_user, id_recipient_dept, id_status, comment_sender, created_at, updated_at) VALUES (48, 56, 11, 5, NULL, 3, NULL, '2025-05-17 12:07:46', '2025-05-17 12:08:59');
INSERT INTO signature_requests (id_request, id_document, id_sender, id_recipient_user, id_recipient_dept, id_status, comment_sender, created_at, updated_at) VALUES (49, 57, 1, 5, NULL, 2, NULL, '2025-05-19 08:58:57', '2025-05-19 08:59:42');
INSERT INTO signature_requests (id_request, id_document, id_sender, id_recipient_user, id_recipient_dept, id_status, comment_sender, created_at, updated_at) VALUES (50, 58, 1, 5, NULL, 2, NULL, '2025-05-21 11:03:18', '2025-05-21 11:04:13');

-- Таблица: signatures
CREATE TABLE IF NOT EXISTS signatures (
  id_signature INTEGER PRIMARY KEY AUTOINCREMENT,
  user_id      INTEGER NOT NULL,
  cert_data    TEXT    NOT NULL,
  fingerprint  TEXT    NOT NULL,
  algorithm    TEXT    NOT NULL,
  valid_from   TEXT,
  valid_to     TEXT,
  status       TEXT,
  FOREIGN KEY(user_id) REFERENCES users(id_user) ON DELETE CASCADE
);

-- Таблица: simple_signatures
CREATE TABLE IF NOT EXISTS simple_signatures (
  id_sign      INTEGER PRIMARY KEY AUTOINCREMENT,
  id_user      INTEGER NOT NULL,
  name         TEXT,                -- пользовательское название
  fingerprint  TEXT NOT NULL,       -- SHA-256 (через пробелы «xx xx …»)
  created_at   TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (id_user) REFERENCES users(id_user) ON DELETE CASCADE
);
INSERT INTO simple_signatures (id_sign, id_user, name, fingerprint, created_at) VALUES (5, 5, 'ЭЦП науч рука', 'd7 71 3b 4e b1 16 2f 27 90 c1 76 e0 80 ab a8 e4 80 f9 a0 5c 71 a9 f2 46 21 23 65 ba 81 c2 e1 62', '2025-05-08 06:43:53');
INSERT INTO simple_signatures (id_sign, id_user, name, fingerprint, created_at) VALUES (6, 1, NULL, '8c 92 a0 66 80 ea 46 ea 74 64 93 06 e5 89 a4 a0 93 f3 4d c0 62 f5 d2 4e 7e a2 1c 36 2e 5e b0 f0', '2025-05-11 05:00:12');

-- Таблица: statuses
CREATE TABLE IF NOT EXISTS statuses (
  id_status   INTEGER PRIMARY KEY,
  name        TEXT    NOT NULL UNIQUE
);
INSERT INTO statuses (id_status, name) VALUES (1, 'В процессе');
INSERT INTO statuses (id_status, name) VALUES (2, 'Подписано');
INSERT INTO statuses (id_status, name) VALUES (3, 'Отклонено');

-- Таблица: tsa_tokens
CREATE TABLE IF NOT EXISTS tsa_tokens (
  id_token    INTEGER PRIMARY KEY AUTOINCREMENT,
  digest      BLOB    NOT NULL,          -- sha-256 от файла
  signed_at   TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
INSERT INTO tsa_tokens (id_token, digest, signed_at) VALUES (1, X'9E8E57FCB68AB09D25F79751C06D861DCC07A120901CF549E7568E4C10EA2233', '2025-05-11 06:59:13');
INSERT INTO tsa_tokens (id_token, digest, signed_at) VALUES (2, X'B015696BE540AAF4D7D91ED77482CD686798B5812E143A5C068162367FD91B34', '2025-05-11 07:04:04');
INSERT INTO tsa_tokens (id_token, digest, signed_at) VALUES (3, X'6574F3CDF8EA40CA2C3A2FD6883DBD7ABB004D047F6481DECDC2EAE42EA6899F', '2025-05-11 07:11:40');
INSERT INTO tsa_tokens (id_token, digest, signed_at) VALUES (4, X'6574F3CDF8EA40CA2C3A2FD6883DBD7ABB004D047F6481DECDC2EAE42EA6899F', '2025-05-11 07:23:48');
INSERT INTO tsa_tokens (id_token, digest, signed_at) VALUES (5, X'6574F3CDF8EA40CA2C3A2FD6883DBD7ABB004D047F6481DECDC2EAE42EA6899F', '2025-05-11 07:25:09');
INSERT INTO tsa_tokens (id_token, digest, signed_at) VALUES (6, X'6574F3CDF8EA40CA2C3A2FD6883DBD7ABB004D047F6481DECDC2EAE42EA6899F', '2025-05-11 07:25:50');
INSERT INTO tsa_tokens (id_token, digest, signed_at) VALUES (7, X'6574F3CDF8EA40CA2C3A2FD6883DBD7ABB004D047F6481DECDC2EAE42EA6899F', '2025-05-11 07:25:51');
INSERT INTO tsa_tokens (id_token, digest, signed_at) VALUES (8, X'6574F3CDF8EA40CA2C3A2FD6883DBD7ABB004D047F6481DECDC2EAE42EA6899F', '2025-05-11 07:28:04');

-- Таблица: user_keys
CREATE TABLE IF NOT EXISTS user_keys (
    id_key     INTEGER PRIMARY KEY AUTOINCREMENT,
    id_user    INTEGER NOT NULL REFERENCES users(id_user) ON DELETE CASCADE,
    enc_priv   BLOB    NOT NULL,        -- iv|tag|ciphertext
    pub_key    BLOB    NOT NULL,
    salt       BLOB    NOT NULL,        -- для AES-PBKDF2
    name       TEXT,                    -- «Основная подпись» (UI)
    fingerprint TEXT,                   -- SHA-256(pub_key) в hex
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP
);
INSERT INTO user_keys (id_key, id_user, enc_priv, pub_key, salt, name, fingerprint, created_at) VALUES (8, 1, X'6DEE772D68BC626C347C597867B6389D1FD648D02E96F6DDFD6B187614AC58BFC26052FC9D0F437D83353512A4D7E3C30B776E07A2C30E73273372B9B8A92B5B5C7A311731877FCE5F4E1D8F47CD5EF26FFC8CE6A5C180A21FEF68922BDAA8D8D3B4B708A19339C48523EA7FE0CB344E36D976306FE7DE2AB27EB44023236C11BBB5A29CA385C0E110C395E9AAECED780D8E9765C7652E041D8C3C2E68FD04FFE101501DB3F99AFD203A6D36CDB8D24C7E1F775E0B9536B452296F7F1828F3C02528E806AFABFFFE02B1BF46867D8CE2406B0F3121479DDBC2772C2DD372B303910A2561CBA9DA705F4B997F4AE9DE805E7135D9C5A5FB3A24893420C1A440C4C227A4AF1BC0CFBEF6EF27B0A193CC0F55F1544CEE3DF51AB6F3C7EFF9183191A13D201BBD1E4C4ECB764719BCF83C607E79EC60A08E27CBC78306F44DD768136311AAC0B9EC15F5470C88DA67659B081CD96B670A942A51E25E007C860ADC17AE4930497E6581D27C4EEE0B467DF9CEE1677610F6AAAA5E24386295BCC4543DE6D817C12B20FEC35208F624D8BD96A2ABE3B8BF4E14EF79CAA903173D693CD0169E28078FF4C042157F7D0C362301554C4D65E1FA0C89A0E3B85DE7F3584B41AB3FECFDB1D7AA8591FF1C9D677DE05536EDB33866263C6082654EB9306C9617BF85FF0E803FB75C5715D79669586E40526805A18805690F37F0FFFA6FE793D9B038A7BC8EE3DC344A7C38B28647D04CB976B9377FFED0A325D8571EDC77C789F495AE63AF28FB252461E12E8FE5BB2C13943656ABAE568A5848150130CD44A30355945F086E713E3489496DF6A84DF3448860088DB1FDAD80C0936F2A455B94F64761FE7FE38E229084FA15A0C6C581386355A6FF03618585D28DC7F472150561BFF7096848BA8EC24625919B5775C9A675AC0D7DD0ADBB57168C5DA9A67E109DEA2BD17553777B0EB96597B5800B02FBEDE08E4859D5402C7225347B667B070CEB30DC7A37D570BAD957369C1A463EC41B3F76DF4DFADC86D4CD60251954ADFFB1B8ED9459D34977A5878F0BB68B499EA9F82DCB835F3DD986C41C23E3747A861C5817EA4875C78B21C01AA7195DCAB3FBF73D146B8BCC2B053848A0187C3AE16358D6E109428BF4F77531B820882941B975F4044718BBAE4E7CD3DC273C3016B6F57AD93BE1D063C5E5DCE3A8D5854774D91022426D817CB09BD5807D3E4702577E5011901CBAA20A119691A894B80C3E5FFEEBC9C2D684D9427F5869DB623E116C07316468757352D8A84181D09F2CAFEC67F6C30747FEEFC2FC4B8467153EC48C3D3CDCAC89C3127D59A4018B7836126C8FC6FEE0428378090A9D521310108387209F655B09EDC639828A9DFAAB1487C6977A9D5B09C7AE86EC64E902E21DC782ADE4D3B02E31BDBE4A1D0F7A8B5D230FA41529A7E97CBBBD0BF4B42A0FCD12CE4B3F45A2D07D6A189DE2D3DE7519ED43DFFDACBF8E8D6F9AC85B8FE4D226EFE8600443FDE3BE04E9EC5D5B284728A3A10CAD72A9F536C67A64303B454030D2327433711E57E0E4678B75E842FACC8DAD313D8C8409E4BE0574FCA9CE4FD809B6343375CBF0F28AF1821E8AC52333727EDF874FFA404308F07C0BAA3E9D3483906C6D525AFAD39C3731EC062E271F58454860DF5D10A2E48C4A94570156575847E33BF9E9971414C774F72D1C6120242C7C438C1FBE188ADA10F98E7037669702F8734228121B418E53510292EB674B6CA96D06B01409073795', X'30820122300D06092A864886F70D01010105000382010F003082010A02820101009C713677F4A51A91019A8C0D593D6B2A14F66C03CDC658B99A6051AC31A841C230A854EA069F3BC39C3D5ED0E00407279EBCFA4CB77E23BEDCFC112D46EC83C6084A8B46159523EE7F4F7E1AE0A1BD180D74397F8EF6525277B6A9E3B2FC9651EFFB786C164CEEB0A03E3C303C685142568009DA257E3878BF3EE3F18EC9E71EEF67EFC01BABE2342406AD59B83CF65EEE6D7B0BA3ED4BBD9B20C436C4A8E8D6B2F25872F9BB545C75F27CD29277A1F8248C64B301CFFB05D2F0E680EA019E96ABC191387687BE24FD062E975234CC9F0CEAD83BB720BBE9211068FAEA8493141A5A50FA66B6332DE24CDD7853C216F95E116FE29783361B76F1A88B45FF05150203010001', X'F386B89D338B579947B2C9D4125FE763', 'Моя подпись', '35 d0 5a c2 bc d3 a5 27 11 b5 f4 34 7d 54 58 cd 59 38 44 04 fa 13 d3 ad e3 9d f1 ce 78 2f 5b 9f', '2025-05-11 06:41:35');
INSERT INTO user_keys (id_key, id_user, enc_priv, pub_key, salt, name, fingerprint, created_at) VALUES (11, 5, X'816C23EF4E0318CD4440A1C76D28D09A1E248B935E6394EC023D919A3541721EFD29CE4BD8BA9AE2B7B5A220C0A2DC5F1C8EBC301C87B1B035931A93E744AD3D92199F9BD2F84AEEF194FDE5DCB825551EE8F1D3014DEFD717DE44B9233D14744B48100DAF3CDB945C068CA2B42CC4880E58325D2F43C52B02F948204DBC749A7920C1638818D8CAEB8BA5B96C169ADC6EE76210286D810A64E1C7E9265D8B279D11EE5A6DFDE96FC50233F0AAC7D3A88343093B909450424934DDF7D71E7DAEC8A9773C08527DF19CFFE2C9442DE02BB8BFE5CEB55534094476F9A53CADA521610576A1BE6B72B5B145E5C67FE732AC5FB0634763C318A1945F7B54A0213CED05C18B4C724B3D341847978F23170F1C0C8243237F295DE53D45E605106CFDDA3F07B4EF16045EC92C92AF2DE0B318977AF7E85100623AA71EF9D620E9107A5ABE51235313AAACAF4755AA90B3B6D803DA363A5436C118F902B06E497B43543B86FEAFC091F28CE48A5E48987A93E9AA8768B5E5EEF14CC4887B637119353E7B9CC57DEC46C03B2613C55973B0BEEB8BD84AD25EA9D44F4FD951487E3739F04FE9616C564AB580E787CB437F026AE75A28C6BADC992514FA0C67590FE2BF92756F3450589528F5EF84480380C38E664887B4BACFC753D7844ABBEE5BB7EB8541A4587600C523CF198BA43AD72E7B3B2C020BCDF5C27A3E1B98228FBF97026DF090FA5EB5CBDCCADD95F7AE7888D11BF15DD6A69C2F4CF981F441EE840AA6B7CA4C5705483B90F70DE59364686F50776A4DECEEBC3FAB9E334B5DA70D3F140780E4F8B113DE2B1400C56E8CCB9E0081D30364183D67419615690C932A7B0BB135C99063BCAF6D8B1C8EC2F8A9EB16A9E74E9B6CE93CB9B8B90F9410390488793556F4B068CF8C4F6E8AE9E675166CB7A6705EC23A31AEE8390EA525ADAF2E505F208F06E747888FA79542F14B74F6B2B51F8891CB5869AFAA5E861061ACAEB6C67A1A5B71E345D25560849371DEDFBC682361B3588CEB3A06B5629F1A74FF5D75214CE071E703EFDF7B8EEF90E64B2933BEE6BFE7EA50986F0754603C433FAC2553AA56434906E3657646943DB14A8BAE9BF0F9B6357D4159415248008A217261434AE0CBB02B1157DAC290EA67D27E29A1B9C846C2391732DFDB6440CC8E6E1B886FE7CD41679C927B3D56E380C7D9A03E717D3DD02661AE5117D1059017FA4EBA224D526E817625C1381BC23A0BC30DB47B9CF647E2AE3A4C59AB67E33C0AE8830CB6DEEA2B44F21504C27DE27C0CB51F0D38067ECE4316DED1EA6EA85E10882A6B61DDDD305D5DC4848B241DA2DEE01803B855B03715BA59CBD2B53C48412BD1D91ECC6799293B387D04E27C6CBF888A59AEE51B27D8E226980B96101CA1DF321EDB1ECBFDC55964C628B72B33D40B7F3ABDD526C0865C1C454D9C09842D5D849B23D2C0FF238C6CBE18C5F4F8C9D7FEA6265080BBFA73133F1B9AC87A035490C766CEABFEDC3A187B4DD94140853A4EC69CAAAE7C5F6ACCC213105DAC6CEA32009B6585D6DC49CC1E4DFEB85D5B862C5F80A84FD1D0D242696A173A982C3337301382EDC1D960133EE2CBC686126ABCC83DFC0B785B3904227A268DBA3CFEFF2450FFDC16422240116659835E4AA6B4476C890E09EF2A2AEEFE4A7E181DD05DAD278FD18A5A64449A3D8EE6901FAA28DBE5D7F2DC0E5E387B8D614B92F60A609E53D6CA8CBE85B70EC54B4A29992C16A7F5DE0EC9C2D607E5A28A8E', X'30820122300D06092A864886F70D01010105000382010F003082010A0282010100D0C779075F94F168E05418C7FDF3E609AFCBD5881DE3B0AAD8E9117DD05A3130B285FC8C3745A0DC59D8A5DDED9C5DE21267D8919D466EDE970B6D4812D41D5E0E2CDDD6278379810C724915C339FB8376214A5A3C839F01DC19003FC6F671E0A313F03A666A2A26E312CE62FF84E6EA1B87996FD61DC5208929569D4F1C4972C3B7F8C887E4F24E5FB7998CCAFEF14A507C76C10D8D2F4D81CDF00090214A1A395D65DCA396C39999E5F2352311A0012CDE24B77B1AC7D40EC527DB27D6B0A9041CAA9E1F1F3341F7238C2CD5754BF6B363B674B8811109923293E8ADAE4D0B429994B32C0DAE008B1F5730C59E2916C43EE3FDE72E77590F9EF960CBD0BFA30203010001', X'0961DB8679D2B7C6C1D8F831120A009E', 'Ваша подпись', '80 bc 10 98 f6 84 53 34 b2 24 fd ad 17 45 5f 83 53 9c e6 59 2f 19 f8 90 ef c4 4c e0 5d 3d eb 1c', '2025-05-11 08:45:37');
INSERT INTO user_keys (id_key, id_user, enc_priv, pub_key, salt, name, fingerprint, created_at) VALUES (13, 9, X'8AF1CB46F7B795D8176CB4C96E3F333284AED0A78924F4F2F69B16F3E21AF5E6C7A82FEF6FEE2B24A42810741F3504ABB0FDF50F2E446EF8D03B45AD3F358B952500CB83AC66074C56191D11356AA0ACDF15117777021A24C769B3038C43B23F2E8E976499F4B6A62B02252E1DDA9907F0651D3185CBA401D71B1F07379A76225F0093035A4904AF8DA0388268821AFBD2C1BC15B0EABD60A0314902C9BF06625841E74F6F3A4643E49301BD349BE5B45D7DB788ED949CF479D49F2C471DB37DE94E94E90A9AEAF921390D6C463A1BFE365CE4553F76ECDCE4C19EDA1D0E0DDFE0B96210A6EB8ED4725A4C9887AD78C49B96261AFAF4A040F9CB745A7B0DEBB407338F43AF86698F6369AD8B01FDAA5E3FC74C11B9196609BD7C279CAD018D28D62150AFB1B24086C38354FA99C1831186F7C150B27BD74315A03B0044E6E0B86C641A866683F2D9A356CD472644B1A50B16AD73BF9EFE2BBC9B2468D66CE31BF1D7358789C21AE6A040B3160828213139F7E3E67A0D4BA34F2C3478F698D9DBB47299AB5E1A56BD60C4CB2F5A93A2FA0F438C36D69DB1EA2818AC2095927286DF65C3C28E851A9BEDF6A948DE8A067F4B4F40C3F600CBD8348DE96D9CB358F59F39E42BFC342DEAFA7803779EAE4325336FD4D491B421812B83C6A515B7EA0D520B49774C75B58FC66821F9DB7BC4E142D8386F428BF5DDF3F525B99B3E4D8A6FBE2126BB53A2A2250E86565384A4C414A4597199775BF2F8D50B28BAA9C6EB62FD624C0A9CFE975723AA5A8F72AEDB21C077559F349120B88E060B8337791C59E839BF47D0BBEF7D4A4E81E5E7F5682B5C917699648C47C05951DE028D5045A68375ADDC4544D22354D83C610EA7FE6D4FA1BDB175DEA31D609E74E34C62AFA45419AA6E3054B2ED86DA53CE4EFF1A54D451FE347395706FB4655BF87BA8320265738B3C65B1CD16551910984DB532D23FBE1A5938196C3E739FB188BC01DF4E66A0BBE5FD99A6F797AC070BD5B3E3657CDD9200A1938146F22211C71225D5989AA4DCD605A10079CCF9841D2C764B117A556409F2BE723B0F05A1ABC7324624C34B93C4247F1EFAD4FF05295C0F61F159C838299EB36541369328395D0691B1705E172CF4A421C055951B5E5E3FFD29DF4C979FCE717554585B8F3500F16999FAE628D434E2196CCBD3BC531447A11D77D7C6A03E928A8906804DF70D1487224028EA51A6DB4BAFC225F26B35E9D2DB82ECD50339D56435B1509F95A73B3DF47D566AD9EC9CE7D993E001F43F52BC477F2C61228005562D87B7B4E35EA74673665F5B758A01B1AFE0B9C20826D8AA8E9F838BF8A0C11111C0C69B3F68D5D6864E75D21F8642E00BF67AF2B6D03246A13210B39DD831668EA47BC533788FB9B41F28637DAC571C01FD4D2EBBB7D70A3C1489895A1306165E706DD6BA66C3FC49C27DC4F97B84E17A225A5A08F163AE8D4730825109AE271113E104FB6AF5176B185BD24FD6EF3E797B2811E51F2037A936D7C597A6CB8DCA63E60407984853F0C257ECACDD47B226C7B7FC1E89488F732A84158F61BF9FA21CFB8FD2BD1E46C70ADE804EC95440454CE62220725FFBB032007176ECF9CE4E3E82D9A567FCEA7975D3AA24EFAEF7EA20DF7DB7E6CC97E187DF5E486C2822413EF826297B8CBB7D4521B8E3C5F0B6F825028B80EDEF12C7CF10B181EB5E4C4C9EBAF660900540CFF31E3F90D7D1C35E9275411997DC567C6C936D18E43AAC89CDABDC4369', X'30820122300D06092A864886F70D01010105000382010F003082010A02820101009CF8F8EE690B99F41869CA81C7D6F61516222F2F7DD89B6CDC4F68B94720407904A97D7197AC09695A727442131520F25977145877B936C315AC92AE847B3CD8A580E78DA1B96C4A73582B84A4F0EF6E0D3F6F6DD1EE58184B3588D543BEA0D34C162C84D0E8E09C3A31091484B7F35233AA49001AB347EB129D327E14CE1D520573476AA393689B57880D7DD16773AF074095115D5B0F97039F20FBBD750253DF08B8555D2AF4904BDFB0365A5506C1D6334C9FD0133F9BBC3C96D59E08F455AEF406D3FC3592FE1DC21A6C09AA60CA117D1ADAC86CC312986276BCF912A130D890C44C74EA457AA55D87577D0CC21F15EF1192C75D3ADD4E3D484870DA48510203010001', X'2D15D7B790E59FCF02CF15E53CF04328', 'Подпись', 'cb 02 d7 cd bc cc fd 4d 5b e5 e1 64 66 39 63 8f 79 bc ec cb 3a 3f 0f 6e 8f 10 6e 03 1c 02 16 15', '2025-05-13 12:00:36');
INSERT INTO user_keys (id_key, id_user, enc_priv, pub_key, salt, name, fingerprint, created_at) VALUES (15, 11, X'9DCD958F62C9F327AA0FFA524125318FD46A3123A543B4EDDA9C852F965F8829AD707CF0D017A067A4917075AFD4E0CD334961A407B875FEF9AAC36760C6DE7A76BC8046750AD5EA23C7C5718207DA08E4C27CF750DC4C7A4F8EAFD935FA223F20551B76884FDACFEBF4F53B149B7E0337EEEA6FED3872128B82117C9E884594BAFEC63EBC471E7BA26E86D664EB21161AB1085E8024A7A651E3A478A10948FDDF58B673A7BD8CD8F5783D956972EACA68800A5B347A75D9503DA52116422EC5777FC9C8CBBCDE603FADCEDE7E7DC4A3B111E3A51EDD15AC59B259D48ECAFFBABC45D8E7B0429FD2B37E44866D14443A583297D188D6A908743AAB33F72D5E1B1F6FBF4726E10120DFC129808DFE773AA07F3369715CAD2FDD8F4548E110D52A8330B092ED75AA6F8EA20FDB60C2622D231623AC2B278663CB88D60B8ADC6021FCE1187E6CA30C85772A0C0F97C8B81B6675AFBBF7448977577FC632FC038396CFD5C3F922ACF3E347F440443D37691B9B50D1AEEE416BD7CB7E9325FE9D23873429C531FCEEA2B6828C00B80D5C4C223CAE5E725A15A3DD55D9D75779C063E9CB18D0B3AE8E91C6E97036EF6F05F42BD3CDD338387B1E10A97C685046676766E82EA7EAEEA8E9214E26B5E66623C6B773D932CC30C2632D1ABC44BAC0F6830F8FBD1A976ACA58324F03CCD5C7CF1C5CCEAC420BEB8B7B03CA29302C03DB1E68760232C91DF91DB1138217A88C510339124BE9D9EF148CCF82FEBE9CB4E7D6330D5285EBFF1898907C06220B26A6C9EA8C251A57156F03C728E414B27F0B4E9E3C852093ED8D96A30A3A6F6206213DDF391A36EB89AB6DD63489CD77CF0C497E47F3A6F3A3CB73334F047145AE4DB1BA4CE8B20670BA368E1D20605AF1388E5C541CA6A8CFB4899F22392BBF932CB0D95B5DDBF303AEE027F16C2158871BE0DCF987DD8A647DEFC6D11665779B9AE69A79EE7E4F7F6FB2021210CCA5CE268B9C9AA929A2F4C92DB12607335E929DB3DB0489C1C537AD6BF2CC3A30D76F3C0162E854BC54F6F831EB25D2D6642BCDEC069B817ABDAF3F841DF77A7EE191DB481A9BE86D3BDE72BE94461A97A3E8F8721BBCF6F3D87A41089DA0CB5E87E094F0F6913654A8DC1F4536FC79FAB1CAE29D60E795CE5080B4D0B65680484725CBD993D66F2C4D56B2CF77BE85F9A3FCDE7B17D2E23762ACDEFE7A14C39462528F5A5AA6A4EF756D705BEE30EB3F452BF403EDF93835350216DDEF3F8B8A769A9D13DB7F517B749D4BF283FC73A8E1364F6BC7AAD020DECB8FD7E73D6DE53479988AA95F4DF7981D4D6FAB47D9F77E009FF563B8EFD8DF9E38D683439281B4D66A1176CBEFB6744B15ED01CBAD6A9B9AF395C7FF73B5710B0751CFC32046E71737CFBA819B5CFF427E43AB06BAEFF5C9A27C8C5D084E840ACD760AA7DF1673A90B06B06FBBD09D92C2303BD9960416F79F6553DF46A6C0BEE23C22C2287978BA736FF73B12124BD77C01100CC5A81F3A42ECB6E2A7A39C3B0BF35A2088291B3472EC34F67D00684B5B7C7D1A8D4E8AAEF167ABEF248DB2D61B3F6B69B38BB6F38135A166074B0CC7EEC2931830284DE8470833F5BCF0D2BA1E30AAB370065436EA4BCEAD1A12AA7AB35F215FD63099547A614C19DC665E5C16BDDE32A3D2A402EEA79857EF9A5D7E5E6ED804A95BCB31CB7459BB51DA3CEA5909CDF87C3CD503938DAA25A2CF33BC8ABF1BAE102B57F26AF7B478687504C63785B27DF7830DD911', X'30820122300D06092A864886F70D01010105000382010F003082010A0282010100C8B8011F0A72060C4DE3C8CFCF9BEAEE7A5C884E533B5003FED865BCCD5FE2E3CCE733DA70142801207228DAA4CA1DC82DA7F47992833DAC03BC33E20EBE85412DCD841E7FC6CEF8129ECE5C333C496462BFFD9AAED1B82213C253C39E419AEF4781A6428754FD617A215FDFD18B04EFFDD0C424D295A34861E46594CC91670EEFCF9862B1E4BD575A4515608BAB707CA62496D2F3087CE64229B9AE27603E57B7103063C277BAF4E4D65D560538E43ECAF138262406DCCB4B93FAC4F0BEAA4673724095320D808D3268B99EB9579448E2228DC51672094DBB2B197B37367A913DE48F9B575035F4D9A70850926C945247B924ACBC5FBDD59388321AB2A6C8C50203010001', X'31A3A730B388B47465388FA7B9554481', 'Пример', 'a2 b3 84 73 31 dd 57 8b 90 69 a6 49 c4 d3 15 63 8d 3a f3 4e cf e9 65 0f 22 2a ca 40 84 69 cb 4d', '2025-05-21 11:08:19');

-- Таблица: users
CREATE TABLE IF NOT EXISTS users (id_user INTEGER PRIMARY KEY AUTOINCREMENT, full_name TEXT, email TEXT NOT NULL UNIQUE, password TEXT NOT NULL, id_group INTEGER, telephone TEXT, id_role INTEGER, id_signature INTEGER, otp_secret TEXT, otp_enabled INTEGER DEFAULT 0, FOREIGN KEY (id_group) REFERENCES groups (id_group), FOREIGN KEY (id_role) REFERENCES roles (id_role), FOREIGN KEY (id_signature) REFERENCES signatures (id_signature));
INSERT INTO users (id_user, full_name, email, password, id_group, telephone, id_role, id_signature, otp_secret, otp_enabled) VALUES (1, 'Колупаев Вячеслав Андреевич', 'frogslawa@list.ru', '$2b$10$PjcHCtqThzUqSBRho1VSfeSkmcgonnu/J9zKVzpfZTdTRRyQm7W/K', 1, '79025460489', 3, NULL, 'JAWH6TCJLETDAAAC', 1);
INSERT INTO users (id_user, full_name, email, password, id_group, telephone, id_role, id_signature, otp_secret, otp_enabled) VALUES (5, 'Петров Павел Александрович', 'abcd@mail.ru', '$2b$10$wcUyYBnTregGjkqwTFfYGubQHiEpuI5sz3beydGk1/4DbpE0L.S5a', NULL, '79999999999', 1, NULL, 'JEDXG7BTHJRROMRT', 0);
INSERT INTO users (id_user, full_name, email, password, id_group, telephone, id_role, id_signature, otp_secret, otp_enabled) VALUES (6, 'Админ ', 'admin@admin.com', '$2b$10$TeX3x.3.a6X7CYNob6coGOEEQYJ.uKvrYp3Ey5pL/4dc.E0i1pQh2', NULL, NULL, NULL, NULL, NULL, 0);
INSERT INTO users (id_user, full_name, email, password, id_group, telephone, id_role, id_signature, otp_secret, otp_enabled) VALUES (9, 'Золотарева Ангелина Александровна', 'sfa@mail.ru', '$2b$10$PtlnnI6jIXwExeHLtCvBd.DF/xb7Ln9eMeB7xUkKyKRGO9NA4dFa.', 1, '', 2, NULL, NULL, 0);
INSERT INTO users (id_user, full_name, email, password, id_group, telephone, id_role, id_signature, otp_secret, otp_enabled) VALUES (11, 'Колупав Вячеслав Андреевич', '123@mail.ru', '$2b$10$Tlt7bHbGVUci7AGdf6yx9e3GZWQBaqwesFeTi./En0EC9YZTWk66C', 1, '79025460489', 3, NULL, 'F5UCMJIZDA4GOK24', 1);

-- Индекс: idx_user_keys_user
CREATE INDEX IF NOT EXISTS idx_user_keys_user ON user_keys(id_user);

COMMIT TRANSACTION;
PRAGMA foreign_keys = on;
